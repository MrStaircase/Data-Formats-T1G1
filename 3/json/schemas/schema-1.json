{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "http://example.com/shop.schema.json",
    "title": "Shops",
    "type": "array",
    "items": {
        "title": "Shop",
        "description": "the Shop is the central entity of the model.",
        "type": "object",
        "properties": {
            "Name": {
                "description": "The shopâ€™s name.",
                "type": "string"
            }, 

            "Capacity": {
                "description": "Maximum number of people the shop can handle.",
                "type": "integer"
            },

            "Logo": {
                "$ref": "#/definitions/Logo"
            },

            "Employees": {
                "description": "Employees of the shop",
                "type": "array",
                "items":{
                    "$ref": "#/definitions/Employee"
                },
                "minItems": 1
            },
            
            "Visitors": {
                "description": "Visitors of the shop",
                "type": "array",
                "items":{
                    "$ref": "#/definitions/Visitor"
                }
            },

            "Products": {
                "description": "Products of the shop",
                "type": "array",
                "items":{
                    "$ref": "#/definitions/Product"
                }
            }
        },
        "required": [ "Name", "Capacity", "Employees" ]
    },
    "definitions": {
        "Employee": {
            "description": "An Employee working in the shop",
            "type": "object",
            "properties": {
                "id" : {
                    "description": "ID of the employee",
                    "type": "string"
                },
                
                "fullname": {
                    "description": "Full name of the employee",
                    "type": "string"
                },

                "salary": {
                    "description": "Salary of the employee",
                    "type": "integer"
                },

                "phoneNumbers": {
                    "description": "Phone numbers of the employee",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },

                "ProductRef": {
                    "description": "References to products handled by the employee",
                    "type": "array",
                    "items": {
                        "type": "string",
                        "format": "iri-reference"
                    }
                }

            },
            "required": [ "id", "salary", "fullname" ]
        },

        "Visitor": {
            "description": "Visitor of the shop",
            "type": "object",
            "properties": {
                "fullname": {
                    "description": "Name of the visitor",
                    "type": "string"
                },

                "nickname": {
                    "description": "Nickname of the visitor",
                    "type": "string"
                },

                "numberOfVisits": {
                    "description": "Number of visits of the visitor",
                    "type": "integer"
                },

                "phoneNumbers": {
                    "description": "Phone numbers of the visitor",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            
            "required": [ "fullname", "nickname", "numberOfVisits" ]
        },

        "Logo": {
            "description": "The logo of the shop",
            "type": "object",
            "properties":{
                "image_uri": {
                    "description": "image of the shop's logo.",
                    "type": "string",
                    "format": "uri"
                },

                "creationDate": {
                    "description": "date of creation of the logo.",
                    "type": "string",
                    "format": "date"
                }

            },
            "required": [ "image", "creationDate" ]
        },

        

        "Product": {
            "description": "A product of the shop",
            "type": "object",
            "properties": {
                "name": {
                    "description": "name of a product",
                    "type": "string"
                },

                "prepTime": {
                    "description": "estimated time (in minutes) required to prepare the product.",
                    "type": "integer"
                },

                "price": {
                    "description": "cost (in CZK) of the product.",
                    "type": "integer"
                }
            },
            "required": [ "name", "prepTime", "price" ]
            
        }
    }
}

